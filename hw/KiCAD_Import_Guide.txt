================================================================================
                    KICAD IMPORT AND USAGE GUIDE
        ESP8266 NodeMCU to Omron G6B-1114P-US Relay Control Circuit
================================================================================

IMPORTANT: The netlist I provided is a simplified format. KiCAD requires a
specific netlist format generated from its schematic editor. This guide will
show you how to create the circuit properly in KiCAD from scratch.

================================================================================
METHOD 1: CREATE CIRCUIT IN KICAD SCHEMATIC EDITOR (RECOMMENDED)
================================================================================

This is the proper way to work with KiCAD. You'll create the schematic from
scratch, which gives you full control and proper KiCAD integration.

STEP 1: INSTALL KICAD
----------------------
1. Download KiCAD from: https://www.kicad.org/download/
2. Install version 7.0 or later (recommended)
3. Launch KiCAD

STEP 2: CREATE NEW PROJECT
---------------------------
1. File → New Project
2. Name it: "ESP8266_Relay_Control"
3. Choose location and click "Create"
4. KiCAD will create .kicad_pro, .kicad_sch, and .kicad_pcb files

STEP 3: OPEN SCHEMATIC EDITOR
------------------------------
1. In project window, double-click on the .kicad_sch file
2. Schematic editor will open with blank canvas

STEP 4: ADD REQUIRED LIBRARIES
-------------------------------
Before adding components, ensure you have the necessary libraries:

1. Preferences → Manage Symbol Libraries
2. Verify these libraries are present (they should be by default):
   - Device (for R, D, generic components)
   - Transistor_BJT (for 2N2222)
   - Relay (for relay symbol)
   - Connector (for power connectors)

If missing, click "+" and browse to KiCAD's library folders

STEP 5: ADD COMPONENTS TO SCHEMATIC
------------------------------------

Press 'A' (or click Place → Add Symbol) to add each component:

Component 1: ESP8266 NodeMCU
-----------------------------
Search: "Conn_01x03" (3-pin connector to represent ESP8266 pins)
Place it on schematic
Press 'E' to edit properties:
  - Reference: J1
  - Value: ESP8266_NodeMCU
  - Add fields:
    Pin 1: D1_GPIO5
    Pin 2: GND
    Pin 3: VIN_5V
Click OK

Alternative: Create custom symbol
1. Tools → Symbol Editor
2. File → New Symbol
3. Name: ESP8266_NodeMCU
4. Add 3 pins:
   - Pin 1: D1 (GPIO5) - Output
   - Pin 2: GND - Power input
   - Pin 3: VIN - Power input
5. Draw rectangle around pins
6. Add text "ESP8266 NodeMCU"
7. File → Save
8. Close Symbol Editor
9. Now you can use this custom symbol

Component 2: Resistor R1 (1kΩ)
-------------------------------
Search: "R" (Resistor)
Place it
Edit properties:
  - Reference: R1
  - Value: 1k
  - Footprint: Resistor_THT:R_Axial_DIN0207_L6.3mm_D2.5mm_P10.16mm_Horizontal

Component 3: Transistor Q1 (2N2222)
------------------------------------
Search: "2N2222" or "Q_NPN_BCE"
Place it
Edit properties:
  - Reference: Q1
  - Value: 2N2222
  - Footprint: Package_TO_SOT_THT:TO-92_Inline

IMPORTANT: Verify pin order!
- If using "Q_NPN_BCE": Base-Collector-Emitter (standard)
- Some symbols use different orders
- Match to your physical transistor datasheet

Component 4: Diode D1 (1N4007)
-------------------------------
Search: "D" or "1N4007"
Place it
Edit properties:
  - Reference: D1
  - Value: 1N4007
  - Footprint: Diode_THT:D_DO-41_SOD81_P10.16mm_Horizontal

Component 5: Relay K1 (Omron G6B)
----------------------------------
Search: "Relay_SPST" (Single Pole Single Throw)
Place it
Edit properties:
  - Reference: K1
  - Value: G6B-1114P-US
  - Footprint: Relay_THT:Relay_SPST_Omron_G6B-1xxx_P5mm

Note: You may need to create custom footprint if exact one not available

Component 6: 12V Power Supply
------------------------------
Search: "Conn_01x02" (2-pin connector)
Place it
Edit properties:
  - Reference: J2
  - Value: 12V_Supply
  - Pin 1: +12V
  - Pin 2: GND

Component 7: Power Symbols
---------------------------
Press 'P' (or Place → Add Power Symbol)

Add these power symbols:
1. +12V (place near relay and 12V connector)
2. GND (place multiple - one for each ground connection)

STEP 6: WIRE THE COMPONENTS
----------------------------
Press 'W' (or Place → Add Wire) to connect components

Make these connections following the circuit diagram:

Connection 1: ESP8266 D1 to R1
  Wire from J1 Pin 1 (D1_GPIO5) to R1 Pin 1

Connection 2: R1 to Q1 Base
  Wire from R1 Pin 2 to Q1 Base

Connection 3: Q1 Emitter to GND
  Wire from Q1 Emitter to GND power symbol

Connection 4: +12V to Relay Coil
  Wire from +12V power symbol to Relay Coil Pin 1

Connection 5: Relay Coil to Q1 Collector
  Wire from Relay Coil Pin 2 to Q1 Collector

Connection 6: Flyback Diode
  Wire from D1 Cathode (marked end) to +12V connection
  Wire from D1 Anode to Q1 Collector connection
  
  TIP: Right-click diode → Properties → Edit Symbol → Flip if needed

Connection 7: ESP8266 GND
  Wire from J1 Pin 2 (GND) to GND power symbol

Connection 8: 12V Supply Connections
  Wire from J2 Pin 1 to +12V power symbol
  Wire from J2 Pin 2 to GND power symbol

Connection 9: Relay Contacts (Optional - for load)
  Add labels showing COM and NO contacts for external load

STEP 7: ADD LABELS AND ANNOTATIONS
-----------------------------------
Press 'L' (or Place → Add Label) to add net labels:
- Label "GPIO5_CTRL" on wire from D1 to R1
- Label "BASE" on wire from R1 to Q1 base
- Label "COLLECTOR" on wire from relay to collector
- Label "+12V" where appropriate
- Label "GND" where appropriate

Press 'T' (or Place → Add Text) to add notes:
- Add note: "Common GND Critical!"
- Add note: "Diode cathode to +12V"
- Add title block with project info

STEP 8: RUN ELECTRICAL RULES CHECK (ERC)
-----------------------------------------
1. Tools → Electrical Rules Checker
2. Click "Run ERC"
3. Review any errors or warnings
4. Fix issues (common: unconnected pins, power symbols)
5. Run again until clean

Common warnings you can ignore:
- "Pin connected to some others pins but no pin to drive it" for power symbols

STEP 9: ASSIGN FOOTPRINTS
--------------------------
1. Tools → Assign Footprints
2. For each component, ensure footprint is assigned:

   R1 → Resistor_THT:R_Axial_DIN0207_L6.3mm_D2.5mm_P10.16mm_Horizontal
   Q1 → Package_TO_SOT_THT:TO-92_Inline
   D1 → Diode_THT:D_DO-41_SOD81_P10.16mm_Horizontal
   K1 → Relay_THT:Relay_SPST_Omron_G6B-1xxx_P5mm (or custom)
   J1 → Connector_PinHeader_2.54mm:PinHeader_1x03_P2.54mm_Vertical
   J2 → Connector_PinHeader_2.54mm:PinHeader_1x02_P2.54mm_Vertical

3. Click "Apply, Save Schematic & Continue"

STEP 10: GENERATE NETLIST (FOR PCB)
------------------------------------
1. File → Export → Netlist
2. Click "Generate Netlist"
3. Save as "ESP8266_Relay_Control.net"
4. This creates proper KiCAD netlist for PCB editor

STEP 11: SAVE SCHEMATIC
------------------------
1. File → Save
2. Optional: File → Plot to create PDF/PNG of schematic
   - Select PDF
   - Click "Plot Current Page"

================================================================================
METHOD 2: IMPORT FROM EXTERNAL NETLIST (ADVANCED)
================================================================================

KiCAD can import some netlist formats, but it's limited. Here's how:

1. Create empty schematic as above
2. Add all components manually (they won't be connected yet)
3. Tools → Import Netlist
4. Browse to netlist file
5. Click "Read Netlist"

However, this often requires:
- Proper KiCAD netlist format (not generic format)
- Pre-existing schematic with components
- Manual cleanup and verification

NOT RECOMMENDED for beginners - better to build schematic directly

================================================================================
STEP 12: CREATE PCB LAYOUT
================================================================================

Now that schematic is complete, design the PCB:

1. OPEN PCB EDITOR
   - In project window, double-click .kicad_pcb file
   - Or from schematic: Tools → Update PCB from Schematic (F8)

2. IMPORT FROM SCHEMATIC
   - Click "Update PCB with changes made to schematic"
   - All components appear in a cluster

3. SET PCB PARAMETERS
   - File → Board Setup
   - Set board thickness: 1.6mm (standard)
   - Set minimum track width: 0.25mm
   - Set minimum clearance: 0.25mm
   - For power traces (12V, relay): use 0.8-1.0mm width
   - For signal traces (GPIO): use 0.3-0.5mm width

4. DEFINE BOARD OUTLINE
   - Select Edge.Cuts layer (right side)
   - Draw board outline (rectangle, ~60mm x 40mm)
   - Use "Draw Line" tool
   - Close the shape completely

5. PLACE COMPONENTS
   - Drag components from cluster to board area
   - Suggested layout:
     
     +--------------------------------+
     |  [J2: 12V]    [K1: Relay]     |
     |                               |
     |  [D1]                         |
     |               [Q1]            |
     |  [R1]                         |
     |                               |
     |  [J1: ESP8266 connector]      |
     +--------------------------------+

   - Keep high-current components (relay, diode) together
   - Keep signal components (R1, Q1) near ESP8266 connector
   - Orient components for logical flow

6. ROUTE TRACES
   - Press 'X' to start routing
   - Route power traces first (+12V, GND) - use thicker traces
   - Route signal traces (GPIO, base, collector)
   - Use 'V' to add via if needed (not recommended for simple board)
   
   Trace width guidelines:
   - +12V, GND: 0.8-1.0mm (handles 30mA easily)
   - GPIO signal: 0.3-0.5mm
   - Base, Collector: 0.5mm

7. ADD GROUND PLANE (RECOMMENDED)
   - Select B.Cu layer (bottom copper)
   - Click "Add Filled Zone"
   - Draw zone covering entire board
   - Properties: Net = GND
   - Click OK
   - Press 'B' to rebuild zones
   - This creates solid ground plane for better grounding

8. ADD MOUNTING HOLES (OPTIONAL)
   - Add → Footprint
   - Search: "MountingHole"
   - Place 4 holes in corners (M3 size typical)

9. ADD LABELS ON SILKSCREEN
   - Select F.SilkS layer
   - Add text labels:
     - "+12V", "GND" near J2
     - "D1 GPIO5", "GND" near J1
     - "COM", "NO" near relay contacts
     - "+" and "-" for polarity indicators
     - Component references (R1, Q1, D1, K1)
     - "ESP8266 Relay Control v1.0"

10. RUN DESIGN RULES CHECK (DRC)
    - Tools → Design Rules Checker
    - Click "Run DRC"
    - Fix any errors (clearance violations, unconnected traces)
    - Re-run until clean

11. 3D VIEW (OPTIONAL)
    - View → 3D Viewer
    - Check component placement and clearances
    - Verify board looks correct

12. GENERATE GERBER FILES (FOR MANUFACTURING)
    - File → Fabrication Outputs → Gerbers
    - Select output directory
    - Select all layers:
      ☑ F.Cu (Front Copper)
      ☑ B.Cu (Back Copper)
      ☑ F.SilkS (Front Silkscreen)
      ☑ B.SilkS (Back Silkscreen)
      ☑ F.Mask (Front Soldermask)
      ☑ B.Mask (Back Soldermask)
      ☑ Edge.Cuts (Board Outline)
    - Click "Plot"
    - Generate drill file: Click "Generate Drill Files"
    - Click "Generate Drill File"

13. GENERATE BOM FROM PCB
    - Tools → Generate BOM
    - Select format (CSV recommended)
    - Click "Generate"

14. SAVE EVERYTHING
    - File → Save

================================================================================
MANUFACTURING OPTIONS
================================================================================

Option 1: ORDER PCB FROM MANUFACTURER
--------------------------------------
Popular PCB manufacturers:
- JLCPCB (www.jlcpcb.com) - Very cheap, good quality, fast
- PCBWay (www.pcbway.com) - Similar pricing
- OSH Park (www.oshpark.com) - US-based, higher quality
- AISLER (www.aisler.net) - Europe-based

Process:
1. Zip all Gerber files + drill file together
2. Upload to manufacturer website
3. Select options:
   - Quantity: 5-10 pcs (minimum usually)
   - Layers: 2
   - Thickness: 1.6mm
   - Surface Finish: HASL (cheapest) or ENIG
   - Copper Weight: 1 oz
   - Solder Mask: Green (or choose color)
4. Review, pay ($2-10 for small boards)
5. Wait 1-2 weeks for delivery

Option 2: ETCH AT HOME (NOT RECOMMENDED)
-----------------------------------------
- Requires chemicals (ferric chloride)
- Time-consuming and messy
- Lower quality
- Only for experienced makers

Option 3: USE BREADBOARD/PERFBOARD
-----------------------------------
- Print schematic from KiCAD
- Build on breadboard for prototyping
- Transfer to perfboard for permanent version
- No PCB manufacturing needed

================================================================================
KICAD LIBRARIES - ADDING MISSING COMPONENTS
================================================================================

If Omron G6B-1114P-US footprint is not in KiCAD libraries:

CREATE CUSTOM FOOTPRINT:
1. Open Footprint Editor (separate from schematic)
2. File → New Footprint
3. Name: "Relay_G6B-1114P-US"
4. Add pads for 4 pins:
   
   Pad spacing: 5mm typical for this relay
   
   Pad 1: Position (0, 0)
   Pad 2: Position (5mm, 0)
   Pad 3: Position (10mm, 0)
   Pad 4: Position (15mm, 0)
   
   Pad properties:
   - Type: Through-hole
   - Shape: Circle
   - Size: 1.5mm diameter
   - Drill: 1.0mm

5. Draw outline on F.SilkS layer showing relay body (~29mm x 12.7mm)
6. Add pin labels: 1, 2, 3, 4
7. Add reference text: "REF**"
8. Add value text: "Relay"
9. Set reference designator: "K"
10. File → Save
11. Now available for use in schematic

ALTERNATIVE: Download community libraries
- SnapEDA (www.snapeda.com) - Free footprints
- Ultra Librarian (www.ultralibrarian.com) - Free footprints
- Component Search Engine (componentsearchengine.com)

Search for "G6B-1114P-US" and download KiCAD files

================================================================================
KICAD KEYBOARD SHORTCUTS
================================================================================

SCHEMATIC EDITOR:
A - Add symbol
W - Add wire
L - Add label
P - Add power symbol
T - Add text
E - Edit properties
M - Move
R - Rotate
Del - Delete
C - Copy
V - Change value
Ctrl+S - Save
Ctrl+Z - Undo

PCB EDITOR:
X - Route track
V - Add via
M - Move
R - Rotate
F - Flip to other side
Del - Delete
D - Drag (keep connections)
B - Rebuild zones
Ctrl+S - Save
Ctrl+Z - Undo

================================================================================
TROUBLESHOOTING KICAD
================================================================================

Problem: Component symbol not found
Solution: Check library is loaded (Preferences → Manage Symbol Libraries)

Problem: Footprint missing
Solution: Use footprint wizard or download from online libraries

Problem: ERC errors about power pins
Solution: Add "PWR_FLAG" symbols to +12V and GND nets

Problem: DRC errors about clearance
Solution: Increase trace spacing or decrease trace width

Problem: PCB components won't update from schematic
Solution: Tools → Update PCB from Schematic, click "Update PCB"

Problem: Can't route trace
Solution: Adjust track width or clearance rules in Board Setup

================================================================================
RECOMMENDED LEARNING RESOURCES
================================================================================

Official KiCAD Documentation:
- https://docs.kicad.org/

KiCAD Video Tutorials:
- YouTube: "KiCAD 7 Tutorial" by DigiKey
- YouTube: "Getting Started with KiCAD" by Contextual Electronics

KiCAD Forums:
- https://forum.kicad.info/

Example Projects:
- GitHub: Search "KiCAD projects"
- KiCAD website: Examples section

================================================================================
TIPS FOR SUCCESS
================================================================================

1. START SIMPLE: Build the schematic first, verify it's correct
2. USE LABELS: Label all nets for clarity
3. RUN ERC/DRC: Always check before manufacturing
4. SAVE OFTEN: Ctrl+S is your friend
5. VERSION CONTROL: Use Git to track changes
6. PRINT SCHEMATIC: Review on paper before PCB
7. DOUBLE-CHECK: Verify component footprints match physical parts
8. TEST FIRST: Build on breadboard before ordering PCB
9. ORDER EXTRAS: Get 5-10 PCBs (same price usually)
10. BACKUP: Keep copies of all files

================================================================================
COMPLETE WORKFLOW SUMMARY
================================================================================

1. ✓ Install KiCAD
2. ✓ Create new project
3. ✓ Open schematic editor
4. ✓ Add all components (ESP8266 connector, R1, Q1, D1, K1, power)
5. ✓ Wire components together
6. ✓ Add labels and annotations
7. ✓ Run ERC, fix errors
8. ✓ Assign footprints
9. ✓ Save schematic
10. ✓ Update PCB from schematic
11. ✓ Draw board outline
12. ✓ Place components on PCB
13. ✓ Route traces
14. ✓ Add ground plane
15. ✓ Add silkscreen labels
16. ✓ Run DRC, fix errors
17. ✓ Generate Gerbers
18. ✓ Order PCB or build on perfboard
19. ✓ Assemble and test!

================================================================================
END OF KICAD IMPORT AND USAGE GUIDE
================================================================================

For questions or issues, refer to KiCAD documentation or forums.
Good luck with your project!
